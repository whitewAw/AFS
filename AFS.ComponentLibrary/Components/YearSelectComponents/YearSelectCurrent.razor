@using System.ComponentModel
@implements IDisposable

<RadzenDropDown TValue="int" Class="w-100"
                Data=@YearList
                @bind-Value=@MainModel.CurrentYear />

@code {

    public event PropertyChangedEventHandler? fieldChanged;

    List<int> YearList = new();

    void FillYearList()
    {
        for (int firstYear = AFSConstraints.MinYear, lastYear = AFSConstraints.MaxYear; firstYear < lastYear; lastYear--)
        {
            YearList.Add(lastYear);
        }
    }

    protected override void OnInitialized()
    {
        fieldChanged += async (sender, e) =>
        {
            await InvokeAsync(StateHasChanged);
        };
        MainModel.PropertyChanged += fieldChanged;
        FillYearList();
        base.OnInitialized();
    }
    public void Dispose() => MainModel.PropertyChanged -= fieldChanged;
}